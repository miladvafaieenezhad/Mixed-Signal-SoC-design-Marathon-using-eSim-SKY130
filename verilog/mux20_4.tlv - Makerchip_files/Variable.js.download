(function(){var $,SignalValue,Utils,Variable;[$,Utils,SignalValue]=[];Variable=(function(){class Variable{static staticInit(TSW,TF){Variable.TIME_SLOT_WIDTH=TSW;return Variable.TRANSITION_FIELDS=TF;}
constructor(waveData,width,name,nickname,scope1,type,ports1,depth1){var c,char,conditionstr,index,indicies,scopeHeader,scopeTail;this.waveData=waveData;this.width=width;this.nickname=nickname;this.scope=scope1;this.type=type;this.ports=ports1;this.depth=depth1;this.conditions=[];this.cycle=null;if(this.isTlvSig()){if(name.indexOf("?")===-1){if(name.indexOf("/")!==-1){this.notFullName=name.substring(name.lastIndexOf("/")+1);}
if(name.indexOf("@")>-1){this.notFullName=name.substring(name.indexOf("$"));this.cycle=parseInt(name.substring(name.indexOf("@")+1,name.lastIndexOf("$")));}else{this.notFullName=name;}}else{this.fullName=name.substring(name.lastIndexOf("@"));this.notFullName=name.substring(name.lastIndexOf("$"));this.cycle=parseInt(name.substring(name.indexOf("@")+1,name.lastIndexOf("$")));conditionstr=name.substring(0,name.lastIndexOf("@"));scopeHeader=Variable.tlvTopScopeName;scopeTail=this.scope.substring(Variable.tlvTopScopeName.length);while(conditionstr.length>0){if(conditionstr.charAt(0)==="/"){if(scopeTail.length===0){console.log("In when condition, tried to go too deep in scope");}
indicies=((function(){var i,len,ref,results;ref=["/",">","|"];results=[];for(i=0,len=ref.length;i<len;i++){char=ref[i];results.push(scopeTail.indexOf(char,1));}
return results;})()).filter(function(x){return x>=0;});index=Math.min(...indicies,scopeTail.length);scopeHeader+=scopeTail.substring(0,index);scopeTail=scopeTail.substring(index);conditionstr=conditionstr.substring(1);}else{conditionstr=conditionstr.substring(1);indicies=((function(){var i,len,ref,results;ref=["$","?","/"];results=[];for(i=0,len=ref.length;i<len;i++){char=ref[i];results.push(conditionstr.indexOf(char,1));}
return results;})()).filter(function(x){return x>=0;});index=Math.min(...indicies,conditionstr.length);c=conditionstr.substring(0,index);conditionstr=conditionstr.substring(index);this.conditions.push(scopeHeader+c);}}}
this.fullName=(this.scope+this.notFullName).trim();}else{this.notFullName=name;this.fullName=(((this.scope.length===0)?"":this.scope+".")+this.notFullName).trim();}}
exists(){return this.missing!==true;}
_setTransitions(transitions,anchors){this.transitions=transitions;this.anchors=anchors;}
getValueAtCycle(cyc){return this.transitions[this.getTransIndexOfCycle(cyc)+1];}
getValueAndValidAtCycle(cyc){var transIndex;transIndex=this.getTransIndexOfCycle(cyc);return[this.transitions[transIndex+1],this.transitions[transIndex+2]];}
getTransIndexOfCycle(cyc){var nextCycle,nextIndex,transIndex;if(cyc<this.waveData.startCycle){return-SignalValue.TRANSITION_FIELDS;}
if(cyc>=this.waveData.lastCycle){return this.transitions.length-SignalValue.TRANSITION_FIELDS;}
transIndex=this.anchors[Math.floor((cyc-this.waveData.startCycle)/Variable.TIME_SLOT_WIDTH)];while(true){nextIndex=transIndex+SignalValue.TRANSITION_FIELDS;nextCycle=this.transitions[nextIndex];if(typeof nextCycle==="undefined"||nextCycle>cyc){break;}
transIndex=nextIndex;}
return transIndex;}
static _makeVar(wd,c,scope,depth){var ports,v;ports=c.length>4?c[4]:null;return v=new Variable(wd,c[1],c[3],c[2],scope,c[0],ports,depth);}
isTlvSig(){return this.scope.startsWith(Variable.tlvTopScopeName);}};Variable.prototype.waveData=null;Variable.prototype.conditions=null;Variable.prototype.cycle=null;Variable.prototype.width=null;Variable.prototype.notFullName=null;Variable.prototype.type=null;Variable.prototype.nickname=null;Variable.prototype.fullName=null;Variable.prototype.scope=null;Variable.prototype.ports=null;Variable.prototype.depth=null;Variable.prototype.transitions=null;Variable.prototype.anchors=null;Variable.TIME_SLOT_WIDTH=null;Variable.TRANSITION_FIELDS=null;Variable.tlvTopScopeName="TLV";return Variable;}).call(this);define(function(require,exports,module){$=require("jquery");Utils=require("Utils");SignalValue=require("VCD/SignalValue");$.extend(Variable.prototype,module.config());return Variable;});}).call(this);