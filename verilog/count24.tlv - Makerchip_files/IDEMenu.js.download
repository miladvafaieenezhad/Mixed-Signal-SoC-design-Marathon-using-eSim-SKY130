(function(){var $,BladeComponent,IDEMenu,Promise,Utils;[BladeComponent,$,Promise,Utils]=[];IDEMenu=class IDEMenu{init(path,opts){this.path=path;return this.compileComponent("menu",opts,this.blade).then((html)=>{$(`#${this.path}`).html(html);return this;});}
project(_project){this._project=_project;if(!this._project.user||!this._project.path){this.save_status("no project");}else{this._project.canEdit().then((canEdit)=>{if(canEdit){return this.save_status("saved");}else{return this.save_status("no auth");}});}
this._project.on("saving",()=>{return this.save_status("saving");});this._project.on("saved",(date)=>{this.save_time(date);return this.save_status("saved");});this._project.on("save error",()=>{return this.save_status("error");});this._project.on("app error",()=>{return this.save_status("apperror");});return this;}
save_time(save_time){var el,savedEl;savedEl=Utils.$one("[mc-menu-status-case=\"saved\"]");el=Utils.$one(".timestamp",savedEl);el.attr("data-livestamp",save_time/1000);el.text("a few seconds ago");return this;}
save_status(status){return Utils.$one("[mc-menu-status]").attr("mc-menu-status",status);}};define("IDEMenu",function(require,exports,module){BladeComponent=require("BladeComponent");$=require("jquery");Promise=require("bluebird");Utils=require("Utils");$.extend(IDEMenu.prototype,BladeComponent,module.config());return IDEMenu;});}).call(this);